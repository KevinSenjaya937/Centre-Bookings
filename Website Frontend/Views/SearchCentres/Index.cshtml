@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    @using Website_Frontend.Models;
    @model IEnumerable<Centre>;
}


<div id="tableview">
    <label for="centreName">Centre Name:</label>
    <input type="text" id="centreName" name="centreName"><br><br>
    <input type="submit" value="Search Centres" onclick="matchingCentres()">

    <table>
        @foreach (var centre in Model)
        {
            <tr>
                <td>@centre.Id</td>
                <td>@centre.Name</td>
            </tr> 
        }

    </table>
</div>

<script>

    function matchingCentres() {
        $.ajax({
            type: "GET",
            url: '/searchcentres/searchallcentres',
            data: {"searchValue": $('#centreName').val()},
            success: function(data) {
                $("#searchResultsDiv").html('');
                var divContent = '';
                for (var i = 0; i < data.length; i++) {
                    divContent += '<p>' + data[i].Name + '<p>';
                }
                $("#searchResultsDiv").append(divContent);
            },
            error: function(jqXhr, textStatus, errorThrown) {
                alert("Error: No matching centres found!");
            }
        
    }

</script>